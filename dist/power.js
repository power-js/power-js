!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.power={})}(this,function(e){"use strict";var d="power-id",r=0;function s(e,t,n){return this.tagName=e||"div",this.children=n||[],this.props=t||{},r+=1,this.props[d]=r,this}var u=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},h=function(e){return(e.startsWith("on")?e.toLowerCase():"on"+e)in window},f=function(e){return e&&e.constructor===s},o={},t={};["Array","Boolean","Date","Error","Function","Null","Number","Object","RegExp","String","Undefined"].forEach(function(e){var n=e.toLowerCase();o["[object "+e+"]"]=n,t["is"+e]=function(e){return(null===(t=e)?String(t):o[{}.toString.call(t)])===n;var t}});var l=t.isArray,p=t.isBoolean,c=t.isFunction,v=t.isNumber,i=t.isObject,m=t.isString,g=!0,y=[];function n(e,t){var n=[];if(f(e))return e;if(c(e)){var r=new e(t);if(f(e))return e;if(r.render){if(!g)return r.render();g=!1}return r}for(var o=arguments.length;2<o--;)y[y.length]=arguments[o];for(;y.length;){var i=y.pop();if(i&&i.pop)for(var a=i.length;a--;)y[y.length]=i[a];else p(i)&&(i=null),v(i)&&(i=String(i)),c(i)||null==i&&(i=""),n[n.length]=i}return new s(e,t,n)}var a=function(e,t){var n=t||document.body;e.componentWillMount&&e.componentWillMount(e);var r=e.create();return r instanceof Element&&n.appendChild(r),e.componentDidMount&&e.componentDidMount(e),e};function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=function(e){for(var t=[].slice.call(arguments,1),n=0,r=t.length;n<r;n++){var o=t[n];for(var i in o)e[i]=o[i]}return e},k=function(e){return this.$events[e.type](e)},D=function(e,t,n){if(!u(t,n)&&(m(t)&&(e.style.cssText=t),i(t))){if(i(n))for(var r in n)r in t||(e.style[r]="");for(var o in t)e.style[o]=t[o]}},w={htmlFor:"for",className:"class"},S=function(e,t,n){if(n)for(var r in n)t[r]||(h(r)&&e.$events[r]?e.removeEventListener(r,e.$events[r]):e.removeAttribute(w[r]||r));for(var o in t)"style"!==o||u(e.style,t.style)?h(o)?(a=e,l=t[s=o],void 0,p=s.startsWith("on")?s.substring(2,s.length).toLowerCase():s,a.addEventListener(p,k),a.$events||(a.$events={}),a.$events[p]=l):((i=o)in e||"class"===i||i.startsWith("data-")||i.startsWith("power-")||"key"===o)&&(e[o]&&t[o]===e[o]||e.setAttribute(w[o]||o,t[o])):D(e,t[o]);var i,a,s,l,p},N=function(e){var t=document.createElement(e.tagName),n=document.createDocumentFragment();return e.children&&e.children.length&&function e(t,n){for(var r=0,o=n.length;r<o;r++){var i=n[r];f(i)?(s=i,t.appendChild(N(s))):l(i)?e(t,i):(a=i,t.appendChild(document.createTextNode(a)))}var a,s}(n,e.children),t.appendChild(n),e.props&&Object.keys(e.props).length&&S(t,e.props),t},U=0,W=function e(t,n,r){for(var o=0,i=t.length;o<i;o++){var a=t[o],s=n[o];"string"==typeof a&&a!==s&&(r[r.length]=U),a.children&&e(a.children,s.children,r)}return r},x=function(e,t,n){var r=e.map(function(e){return e.props.key}),o=t.map(function(e){return e.props.key}),i=function(e,t){for(var n=[],r=[],o=e.length,i=t.length,a=0;a<o;a++)n[e[a]]=!0;for(var s=0;s<i;s++)n[t[s]]?delete n[t[s]]:n[t[s]]=!0;for(var l in n)r[r.length]=l;return r}(r,o),a=i.length;if(i.length){if(i.length&&r.length===o.length)for(var s=n.children.length,l=0;l<s;l++)n.replaceChild(N(t[l]),n.children[l]);else if(r.length>o.length)for(var p=0;p<a;p++)for(var h=i[p],c=0,u=n.children.length;c<u;c++){var d=n.children[c];if(d&&d.attributes.key.value===h){n.removeChild(d);break}}else if(r.length<o.length)for(var f=document.createDocumentFragment(),v=0;v<a;v++){for(var m=i[v],g=t.length-1;0<=g;g--){var y=t[g];if(String(y.props.key)===m){f.appendChild(N(y));break}}n.appendChild(f)}}else{a=(i=function(e,t){for(var n=[],r=U=0,o=e.length;r<o;r++){var i=e[r],a=t[r];i.children&&(W(i.children,a.children,n),U++)}return n}(e,t)).length;for(var C=0;C<a;C++)n.replaceChild(N(t[i[C]]),n.children[i[C]])}},E=function(e,t,n){var r=e.props[d];null===t.props&&(t.props={}),t.props[d]=r;var o,i,a,s,l,p=n.node.querySelector("[".concat(d,'="').concat(r,'"]')),h=t.children,c=e.children;o=c,(i=h).length&&i[0].props&&void 0!==i[0].props.key||o.length&&o[0].props&&void 0!==o[0].props.key?x(c,h,p):function e(t,n,r,o){for(var i=0,a=n.length;i<a;i++){var s=n[i];if(void 0===t[i]&&f(s)){s.props||(s.props={});var l=N(s,o);r.appendChild(l)}else if(m(s)&&s!==t[i]){var p=document.createTextNode(s);r.replaceChild(p,r.childNodes[i])}else f(s)?E(t[i],s,o):s.pop&&t[i]&&t[i].pop&&e(t[i],s,r,o)}for(var h,c=t.length-n.length,u=t.length-1;0<c;)(h=o.node.querySelector("[".concat(d,'="').concat(t[u].props[d],'"]')))&&h.parentNode&&h.parentNode.removeChild(h),u-=1,c-=1}(c,h,p,n),a=e.props,s=t.props,l=p,u(a,s)||S(l,s,a)},P=["push","pop","shift","unshift","splice"],j=function(){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=this.constructor;this.componentWillInitialize&&this.componentWillInitialize(this),this._power=!0,this.name=t.name,this.props=c(this.getDefaultProps)?this.getDefaultProps():i(t.defaultProps)?t.defaultProps:{},e&&(this.props=b({},this.props,e)),this.state=c(this.getInitialState)?this.getInitialState():i(t.initialState)?t.initialState:{},this.componentDidInitialize&&this.componentDidInitialize(this)}var e,t,r;return e=n,(t=[{key:"create",value:function(){var o,e;return this.props=(e=(o=this).props,new Proxy(e,{get:function(e,t){var n=e[t],r={get:function(t,n){var e=t[n];return c(e)&&l(t)?function(){var e=Array.prototype[n].apply(t,arguments);return P.includes(n)&&o.shouldComponentUpdate(o.props,o.state)&&o.rerender(),e}:e}};return l(n)?new Proxy(n,r):n},set:function(e,t,n){var r=e[t];return o.shouldComponentUpdate(e,o.state)&&r!==n&&(e[t]=n,o.rerender()),!0}})),this.componentVDom=this.render(),this.node=N(this.componentVDom,this),this.node}},{key:"shouldComponentUpdate",value:function(){return!0}},{key:"setState",value:function(e,t){var n=this.state;if(!u(e,n)){var r=this.props,o=e;if(c(o)&&(o=o.call(this,n,r)),o=b({},n,o),!this.shouldComponentUpdate(r,o))return!1;this.state=o,this.rerender(),c(t)&&t.call(this)}}},{key:"forceUpdate",value:function(e){this.rerender(),c(e)&&e.call(this)}},{key:"rerender",value:function(){this.componentWillUpdate&&this.componentWillUpdate(this);var e=this.render();this.patch(this.componentVDom,e),this.componentVDom=e,this.componentDidUpdate&&this.componentDidUpdate(this)}},{key:"patch",value:function(e,t){E(e,t,this)}},{key:"destroy",value:function(){this.componentWillUnmount&&this.componentWillUnmount(this),this.node.parentNode.removeChild(this.node),this.node=null,this.componentDidUnmount&&this.componentDidUnmount(this)}}])&&C(e.prototype,t),r&&C(e,r),n}(),O="1.0.0-alpha",I={h:n,render:a,Component:j,version:O};e.default=I,e.h=n,e.render=a,e.Component=j,e.version=O,Object.defineProperty(e,"__esModule",{value:!0})});
